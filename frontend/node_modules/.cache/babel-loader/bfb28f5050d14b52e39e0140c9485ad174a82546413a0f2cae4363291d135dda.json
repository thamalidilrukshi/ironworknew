{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminDashboard(){const[message,setMessage]=useState(\"\");const[file,setFile]=useState(null);const[uploadedImages,setUploadedImages]=useState([]);// Fetching dashboard message\nuseEffect(()=>{const token=localStorage.getItem(\"token\");fetch(\"http://localhost:3001/api/admin/dashboard\",{method:\"GET\",headers:{\"x-access-token\":token}}).then(response=>response.json()).then(data=>setMessage(data.message)).catch(err=>console.error(err));},[]);// Fetch all uploaded images\nuseEffect(()=>{fetch(\"http://localhost:3001/images\").then(response=>response.json()).then(data=>setUploadedImages(data)).catch(err=>console.error(\"Error fetching images:\",err));},[]);// Handling file input change\nconst handleFileChange=e=>{setFile(e.target.files[0]);};// Upload image\nconst handleImageUpload=async e=>{e.preventDefault();const token=localStorage.getItem(\"token\");const formData=new FormData();formData.append(\"image\",file);try{const response=await fetch(\"http://localhost:3001/upload\",{method:\"POST\",headers:{\"x-access-token\":token},body:formData});const data=await response.json();if(data.file){setUploadedImages(prev=>[...prev,data.file]);// Add new image\nalert(\"Image uploaded successfully!\");}else{alert(\"Error uploading image.\");}}catch(err){console.error(\"Error uploading image:\",err);alert(\"Failed to upload image.\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"h3\",{children:\"Upload Image\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleImageUpload,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Upload\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Uploaded Images\"}),uploadedImages.map((image,index)=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:3001/image/\".concat(image.filename),alt:\"Uploaded \".concat(index),style:{maxWidth:\"300px\",margin:\"10px\"}})},index))]})]});}export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","AdminDashboard","message","setMessage","file","setFile","uploadedImages","setUploadedImages","token","localStorage","getItem","fetch","method","headers","then","response","json","data","catch","err","console","error","handleFileChange","e","target","files","handleImageUpload","preventDefault","formData","FormData","append","body","prev","alert","children","onSubmit","type","onChange","required","map","image","index","src","concat","filename","alt","style","maxWidth","margin"],"sources":["C:/xampp/htdocs/iron iron/iron_work/simply-clone/frontend/src/components/AdminDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nfunction AdminDashboard() {\r\n  const [message, setMessage] = useState(\"\");\r\n  const [file, setFile] = useState(null);\r\n  const [uploadedImages, setUploadedImages] = useState([]);\r\n\r\n  // Fetching dashboard message\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    fetch(\"http://localhost:3001/api/admin/dashboard\", {\r\n      method: \"GET\",\r\n      headers: { \"x-access-token\": token },\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => setMessage(data.message))\r\n      .catch((err) => console.error(err));\r\n  }, []);\r\n\r\n  // Fetch all uploaded images\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:3001/images\")\r\n      .then((response) => response.json())\r\n      .then((data) => setUploadedImages(data))\r\n      .catch((err) => console.error(\"Error fetching images:\", err));\r\n  }, []);\r\n\r\n  // Handling file input change\r\n  const handleFileChange = (e) => {\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n  // Upload image\r\n  const handleImageUpload = async (e) => {\r\n    e.preventDefault();\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:3001/upload\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"x-access-token\": token,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.file) {\r\n        setUploadedImages((prev) => [...prev, data.file]); // Add new image\r\n        alert(\"Image uploaded successfully!\");\r\n      } else {\r\n        alert(\"Error uploading image.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error uploading image:\", err);\r\n      alert(\"Failed to upload image.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <br /><br /><br />\r\n      <h2>Admin Dashboard</h2>\r\n      <p>{message}</p>\r\n\r\n      {/* Image Upload Form */}\r\n      <h3>Upload Image</h3>\r\n      <form onSubmit={handleImageUpload}>\r\n        <input type=\"file\" onChange={handleFileChange} required />\r\n        <button type=\"submit\">Upload</button>\r\n      </form>\r\n\r\n      {/* Display Uploaded Images */}\r\n      <div>\r\n        <h3>Uploaded Images</h3>\r\n        {uploadedImages.map((image, index) => (\r\n          <div key={index}>\r\n            <img\r\n              src={`http://localhost:3001/image/${image.filename}`}\r\n              alt={`Uploaded ${index}`}\r\n              style={{ maxWidth: \"300px\", margin: \"10px\" }}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}